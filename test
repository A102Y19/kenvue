import os

def check_dynamic_download_path():
    print("DEBUG: CHECK DYNAMIC DOWNLOAD PATH")

    # Get current system username
    username = os.getlogin()
    print("Detected username:", username)

    # Build the download path dynamically
    download_path = rf"C:\Users\{username}\Downloads"
    print("Dynamic download path:", download_path)

    # Check if the path exists
    if os.path.exists(download_path):
        print("Downloads folder exists")

        files = os.listdir(download_path)
        if files:
            print("Files in Downloads folder:")
            for f in files:
                if f.endswith(".crdownload"):
                    print(f, "- still downloading")
                else:
                    print(f)
        else:
            print("Downloads folder is empty")
    else:
        print("Downloads folder does not exist or cannot be accessed")

    print("END DEBUG")

# Run the function
check_dynamic_download_path()
